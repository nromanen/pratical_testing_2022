{
	"info": {
		"_postman_id": "1bcfffef-4309-48d3-b52b-9982ae415841",
		"name": "New Collection",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
		"_exporter_id": "25753023"
	},
	"item": [
		{
			"name": "Create user",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							""
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": "{\"email\": \"lizochkanosach92@i.ua\", \"name\": \"Yelyzaveta Nosach\", \"password\": \"Liza350743!\", \"isUbs\": true}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "https://greencity-user.testgreencity.ga/ownSecurity/signUp?lang=ua",
					"protocol": "https",
					"host": [
						"greencity-user",
						"testgreencity",
						"ga"
					],
					"path": [
						"ownSecurity",
						"signUp"
					],
					"query": [
						{
							"key": "lang",
							"value": "ua"
						}
					]
				}
			},
			"response": []
		},
		{
			"name": "Authorization",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status code is 200\", function () {\r",
							"    pm.response.to.have.status(200);\r",
							"});\r",
							"pm.test(\"Body matches string\", function () {\r",
							"    pm.expect(pm.response.json()).to.have.property(\"accessToken\");\r",
							"});"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": "{\"email\": \"lizanosach92@gmail.com\",\r\n \"password\": \"Greencity\"}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "https://greencity-user.testgreencity.ga/ownSecurity/signIn",
					"protocol": "https",
					"host": [
						"greencity-user",
						"testgreencity",
						"ga"
					],
					"path": [
						"ownSecurity",
						"signIn"
					]
				}
			},
			"response": []
		},
		{
			"name": "New Request",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test('Verify JWT token', function(){\r",
							"   pm.response.to.have.jsonBody('accessToken')\r",
							"   let data = pm.response.json()\r",
							"   pm.expect(data.userId).to.eql(215)\r",
							"})\r",
							"var schema = {\r",
							" \"type\": \"object\",\r",
							"  \"properties\": {\r",
							"    \"userId\": {\r",
							"      \"type\": \"integer\"\r",
							"    },\r",
							"    \"accessToken\": {\r",
							"      \"type\": \"string\"\r",
							"    },\r",
							"    \"refreshToken\": {\r",
							"      \"type\": \"string\"\r",
							"    },\r",
							"    \"name\": {\r",
							"      \"type\": \"string\"\r",
							"    },\r",
							"    \"ownRegistrations\": {\r",
							"      \"type\": \"boolean\"\r",
							"    }\r",
							"  },\r",
							"  \"required\": [\r",
							"    \"userId\",\r",
							"    \"accessToken\",\r",
							"     \"refreshToken\",\r",
							"       \"name\",\r",
							"    \"ownRegistrations\"\r",
							"  ]\r",
							"}\r",
							"\r",
							"pm.test('Schema is valid', function () {\r",
							"    pm.expect(tv4.validate(pm.response.json(), schema)).to.be.true;\r",
							"});"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": "{\"email\": \"lizochkanosach92@i.ua\",\r\n \"password\": \"Liza350743!\"}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "https://greencity-user.testgreencity.ga/ownSecurity/signIn",
					"protocol": "https",
					"host": [
						"greencity-user",
						"testgreencity",
						"ga"
					],
					"path": [
						"ownSecurity",
						"signIn"
					]
				}
			},
			"response": []
		},
		{
			"name": "Negative test \"Invalid email\"",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status code is 400\", function () {\r",
							"    pm.response.to.have.status(400);\r",
							"});\r",
							"pm.test('Error message', function () {\r",
							"    let data = pm.response.json()\r",
							"    pm.expect(data.name).eql(\"email\")\r",
							"        pm.expect(data.message).contain(pm.environment.get(\"UserName\"))\r",
							"        })\r",
							""
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": "{\"email\":\"{{UserName}}\", \"password\": \"Liza350743!\"}\r\n",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "https://greencity-user.testgreencity.ga/ownSecurity/signIn",
					"protocol": "https",
					"host": [
						"greencity-user",
						"testgreencity",
						"ga"
					],
					"path": [
						"ownSecurity",
						"signIn"
					]
				}
			},
			"response": []
		},
		{
			"name": "Negative test \"Invalid password\"",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status code is 400\", function () {\r",
							"    pm.response.to.have.status(400);\r",
							"});\r",
							"pm.test('Error message', function () {\r",
							"    let data = pm.response.json()\r",
							"    pm.expect(data.name).to.eql('password')\r",
							"    pm.expect(data.message).contain('Bad password')\r",
							"})\r",
							""
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": "{\"email\": \"lizochkanosach92@i.ua\",\r\n \"password\": \"Liza35074!\"}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "https://greencity-user.testgreencity.ga/ownSecurity/signIn",
					"protocol": "https",
					"host": [
						"greencity-user",
						"testgreencity",
						"ga"
					],
					"path": [
						"ownSecurity",
						"signIn"
					]
				}
			},
			"response": []
		},
		{
			"name": "Invalid email and password",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Invalid email and password\", function () {\r",
							"    let data = pm.response.json()\r",
							"    let data1 = data[0]\r",
							"    pm.expect(data1.name).to.be.oneOf([\"email\",\"password\"])\r",
							"     pm.expect(data1.message).to.eql(\"must not be blank\")\r",
							"    let data2 = data[1] \r",
							"    pm.expect(data1.name).to.be.oneOf([\"email\",\"password\"])\r",
							"    pm.expect(data2.message).to.eql(\"must not be blank\")\r",
							"    });"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": "{\"email\": \"\",\r\n \"password\": \"\"}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "https://greencity-user.testgreencity.ga/ownSecurity/signIn",
					"protocol": "https",
					"host": [
						"greencity-user",
						"testgreencity",
						"ga"
					],
					"path": [
						"ownSecurity",
						"signIn"
					]
				}
			},
			"response": []
		},
		{
			"name": "accessToken",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status code is 400\", function () {\r",
							"    pm.response.to.have.status(400);\r",
							"});\r",
							"pm.test('Error message', function () {\r",
							"    let data = pm.response.json()\r",
							"    pm.expect(data.name).to.eql('accessToken')\r",
							"    pm.expect(data.message).contain('eyJhbGciOiJIUzI1NiJ')\r",
							"})"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": "{\r\n \"accessToken\": \"eyJhbGciOiJIUzI1Ni.\"\r\n }",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "https://greencity-user.testgreencity.ga/ownSecurity/signIn",
					"protocol": "https",
					"host": [
						"greencity-user",
						"testgreencity",
						"ga"
					],
					"path": [
						"ownSecurity",
						"signIn"
					]
				}
			},
			"response": []
		},
		{
			"name": "email",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status code is 400\", function () {\r",
							"    pm.response.to.have.status(400);\r",
							"});\r",
							"pm.test(\"Invalid email\", function(){\r",
							"    let data = pm.response.json()\r",
							"    pm.expect(data.message).contain(pm.environment.get(\"UserName\"))\r",
							"});"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": "{\"email\": \"{{UserName}}\",\r\n \"password\": \"Liza35074!\"}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "https://greencity-user.testgreencity.ga/ownSecurity/signIn",
					"protocol": "https",
					"host": [
						"greencity-user",
						"testgreencity",
						"ga"
					],
					"path": [
						"ownSecurity",
						"signIn"
					]
				}
			},
			"response": []
		},
		{
			"name": "email",
			"request": {
				"method": "POST",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": "{\"{{name}}\": \"lizochkanosach92@i.ua\",\r\n \"password\": \"Liza35074!\"}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "https://greencity-user.testgreencity.ga/ownSecurity/signIn",
					"protocol": "https",
					"host": [
						"greencity-user",
						"testgreencity",
						"ga"
					],
					"path": [
						"ownSecurity",
						"signIn"
					]
				}
			},
			"response": []
		},
		{
			"name": "Login token",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							""
						],
						"type": "text/javascript"
					}
				}
			],
			"protocolProfileBehavior": {
				"disableBodyPruning": true
			},
			"request": {
				"auth": {
					"type": "bearer",
					"bearer": [
						{
							"key": "token",
							"value": "eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJsaXphbm9zYWNoOTJAZ21haWwuY29tIiwicm9sZSI6WyJST0xFX1VTRVIiXSwiaWF0IjoxNjg1NjQ1NTI2LCJleHAiOjE2ODU2NTI3MjZ9.HgE9COkmO9kcYykA94FROTRRPl4lXF-rnDRnsDMJSdw",
							"type": "string"
						}
					]
				},
				"method": "GET",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": "{\"email\": \"lizochkanosach92@i.ua\",\r\n \"password\": \"Liza350743!\"}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "https://greencity-user.testgreencity.ga/user/215/profile/",
					"protocol": "https",
					"host": [
						"greencity-user",
						"testgreencity",
						"ga"
					],
					"path": [
						"user",
						"215",
						"profile",
						""
					]
				}
			},
			"response": []
		},
		{
			"name": "New Request",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.globals.set(\"userid\",pm.response.json().userid)\r",
							"pm.globals.set(\"accessToken\",pm.response.json().accessToken)"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": "{\"email\": \"lizochkanosach92@i.ua\",\r\n \"password\": \"Liza350743!\"}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "https://greencity-user.testgreencity.ga/ownSecurity/signIn",
					"protocol": "https",
					"host": [
						"greencity-user",
						"testgreencity",
						"ga"
					],
					"path": [
						"ownSecurity",
						"signIn"
					]
				}
			},
			"response": []
		},
		{
			"name": "New Request",
			"protocolProfileBehavior": {
				"disableBodyPruning": true
			},
			"request": {
				"auth": {
					"type": "bearer",
					"bearer": [
						{
							"key": "token",
							"value": "{{accessToken}}",
							"type": "string"
						}
					]
				},
				"method": "GET",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": ""
				},
				"url": {
					"raw": "https://greencity-user.testgreencity.ga/user/{{userid}}/profile/",
					"protocol": "https",
					"host": [
						"greencity-user",
						"testgreencity",
						"ga"
					],
					"path": [
						"user",
						"{{userid}}",
						"profile",
						""
					]
				}
			},
			"response": []
		},
		{
			"name": "New Request",
			"request": {
				"auth": {
					"type": "bearer",
					"bearer": [
						{
							"key": "token",
							"value": "eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJsaXpvY2hrYW5vc2FjaDkyQGkudWEiLCJyb2xlIjpbIlJPTEVfVVNFUiJdLCJpYXQiOjE2ODU2NDgyNTcsImV4cCI6MTY4NTY1NTQ1N30.LUR0vjSRFnyZlyOPFnppSUE3Df7KjdQz2_z6-C3G1_E",
							"type": "string"
						}
					]
				},
				"method": "PUT",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": "\"profilePicturePath\": null,\r\n    \"name\": \"Yelyzaveta Nosach\",\r\n    \"city\": null,\r\n    \"userCredo\": null,\r\n    \"socialNetworks\": [],\r\n    \"showLocation\": true,\r\n    \"showEcoPlace\": true,\r\n    \"showShoppingList\": true,\r\n    \"rating\": 0.0,\r\n    \"role\": \"ROLE_USER\"\r\n}"
				},
				"url": {
					"raw": "https://greencity-user.testgreencity.ga/user/profile/",
					"protocol": "https",
					"host": [
						"greencity-user",
						"testgreencity",
						"ga"
					],
					"path": [
						"user",
						"profile",
						""
					]
				}
			},
			"response": []
		},
		{
			"name": "Edd cusrom habit",
			"request": {
				"method": "POST",
				"header": []
			},
			"response": []
		}
	]
}
